if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());var Azavea={};(function(c){c.logUrl="handlers/logger.ashx";c.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"};c.superEquals=function(f,e){var d;if(c.isArray(f)&&c.isArray(e)){if(f.length===e.length){for(d=0;d<f.length;d++){if(!c.superEquals(f[d],e[d])){return false}}}else{return false}return true}else{if(typeof(f)==="object"&&typeof(e)==="object"){if(f!==null&&e!==null){for(d in f){if(f.hasOwnProperty(d)&&e.hasOwnProperty(d)){if(!c.superEquals(f[d],e[d])){return false}}else{return false}}for(d in e){if(f.hasOwnProperty(d)&&e.hasOwnProperty(d)){if(!c.superEquals(f[d],e[d])){return false}}else{return false}}}else{if(f!==null||e!==null){return false}}return true}else{return f===e}}};var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";c.encodeBase64=function(f){var d="";var n,l,j,m,k,h,g;var e=0;f=c.encodeUtf8(f);while(e<f.length){n=f.charCodeAt(e++);l=f.charCodeAt(e++);j=f.charCodeAt(e++);m=n>>2;k=((n&3)<<4)|(l>>4);h=((l&15)<<2)|(j>>6);g=j&63;if(isNaN(l)){h=g=64}else{if(isNaN(j)){g=64}}d=d+b.charAt(m)+b.charAt(k)+b.charAt(h)+b.charAt(g)}return d};c.decodeBase64=function(f){var d="";var n,l,j;var m,k,h,g;var e=0;f=f.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(e<f.length){m=b.indexOf(f.charAt(e++));k=b.indexOf(f.charAt(e++));h=b.indexOf(f.charAt(e++));g=b.indexOf(f.charAt(e++));n=(m<<2)|(k>>4);l=((k&15)<<4)|(h>>2);j=((h&3)<<6)|g;d=d+String.fromCharCode(n);if(h!==64){d=d+String.fromCharCode(l)}if(g!==64){d=d+String.fromCharCode(j)}}d=c.decodeUtf8(d);return d};c.encodeUtf8=function(e){e=e.replace(/\r\n/g,"\n");var d="",g;for(g=0;g<e.length;g++){var f=e.charCodeAt(g);if(f<128){d+=String.fromCharCode(f)}else{if((f>127)&&(f<2048)){d+=String.fromCharCode((f>>6)|192);d+=String.fromCharCode((f&63)|128)}else{d+=String.fromCharCode((f>>12)|224);d+=String.fromCharCode(((f>>6)&63)|128);d+=String.fromCharCode((f&63)|128)}}}return d};c.decodeUtf8=function(d){var e="";var g=0;var j=0,h=0,f=0;while(g<d.length){j=d.charCodeAt(g);if(j<128){e+=String.fromCharCode(j);g++}else{if((j>191)&&(j<224)){f=d.charCodeAt(g+1);e+=String.fromCharCode(((j&31)<<6)|(f&63));g+=2}else{f=d.charCodeAt(g+1);c3=d.charCodeAt(g+2);e+=String.fromCharCode(((j&15)<<12)|((f&63)<<6)|(c3&63));g+=3}}}return e};c.compressLzw=function(g){var l={};var j=(g+"").split("");var e=[];var k;var d=j[0];var h=256;var f;for(f=1;f<j.length;f++){k=j[f];if(l[d+k]){d+=k}else{e.push(d.length>1?l[d]:d.charCodeAt(0));l[d+k]=h;h++;d=k}}e.push(d.length>1?l[d]:d.charCodeAt(0));for(f=0;f<e.length;f++){e[f]=String.fromCharCode(e[f])}return e.join("")};c.decompressLzw=function(n){var e={};var m=(n+"").split("");var g=m[0];var f=g;var k=[g];var d=256;var h;var l;for(l=1;l<m.length;l++){var j=m[l].charCodeAt(0);if(j<256){h=m[l]}else{h=e[j]?e[j]:(f+g)}k.push(h);g=h.charAt(0);e[d]=f+g;d++;f=h}return k.join("")};c.isStringTruthy=function(d){if(d==="false"){return false}else{if(d===""){return false}else{if(d==="NaN"){return false}else{if(d==="null"){return false}else{if(d==="undefined"){return false}else{if(d==="0"){return false}}}}}}return true};c.stripTags=function(d){if(d&&d.replace){return d.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")}else{return d}};c.unescapeHTML=function(d){if(d&&d.replace){return c.stripTags(d).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}else{return d}};c.escapeHTML=function(d){if(d&&d.replace){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else{return d}};c.getQueryStrParam=function(d,f){var i;if(window.location.search){var e,h,g;e=window.location.search.match(new RegExp("[?&]"+d+"="+f,"gi"));if(e&&e.length){i=e[0].substring(e[0].indexOf("=")+1)}}return i};c.getIntParam=function(d){var e=c.getQueryStrParam(d,"[-+]?[0-9]+");if(e){e=parseInt(e,10)}return e};c.getFloatParam=function(d){var e=c.getQueryStrParam(d,"[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?");if(e){e=parseFloat(e)}return e};c.getStringParam=function(d){var e=c.getQueryStrParam(d,"[^&]+");if(e){e=decodeURIComponent(e)}return e};c.log=function(e){try{if(window.console&&window.console.log){window.console.log(e)}}catch(d){}};c.formatAsMoney=function(e,d){Azavea.log("Azavea.formatAsMoney is a deprecated function. Please switch to Azavea.renderers.money");return Azavea.renderers.money(e,d)};c.getValidFloat=function(g,e,d){var f=NaN;if(g){if(/^[0-9,]*(\.)?[0-9]*$/.test(g)){g=g.replace(",","");if(g[0]==="."){g="0"+g}f=parseFloat(g);if(f||f===0){if(e||(e===0)){if(f<e){f=NaN}}if(d||(d===0)){if(f>d){f=NaN}}}}}return f};c.getValidPercentage=function(e){var d=NaN;if(/^[0-9,]*(\.)?[0-9]*%?$/.test(e)){e=e.replace(",","");if(e[0]==="."){e="0"+e}d=parseFloat(e);if((d<0)||(d>100)){d=NaN}}return d};c.doLast=function(d,f){var e;return function(){(function(g){if(e){clearTimeout(e)}e=setTimeout(function(){return f.apply(this,g)},d)}(arguments))}};c.errorToString=function(d){var e="";if(d){if(typeof d==="string"){e=d}else{$.each(d,function(f,g){if(e===""){e="{ "}else{e+=", "}e+=f+": "+g});e+=" }"}}return e};c.tryCatch=function(e,d){return function(){if(c.timeTryCatch){c.startTiming(e)}try{return d.apply(this,arguments)}catch(f){c.logError("Unexpected error while calling:\n"+d+"\nWith arguments:\n"+arguments,e,f);alert("Unable to "+e+".  An error occurred: "+c.errorToString(f));throw f}finally{if(c.timeTryCatch){c.endTiming(e)}}}};c.logError=function(h,d,f){try{var g=c.errorToString(f);$.ajax({url:c.logUrl,type:"POST",data:{message:h,triedTo:d,url:window.location.href,level:"ERROR"},dataType:"text",success:function(e){c.log("Successfully logged error to server, message '"+h+"', attempted action '"+d+"', error '"+g+"'.  Handler response: '"+e+"'.")},error:function(e){c.log("Unable to log error to server ("+c.logUrl+"), original message '"+h+"', original attempted action '"+d+"', original error '"+g+"'.  Handler response: '"+e.responseText+"'.")}})}catch(i){c.log("Error while attempting to handle an error, original message '"+h+"', original attempted action '"+d+"', original error '"+f+"'.  New error: '"+i+"'.")}};c.inputOnFocus=function(d,e){return c.tryCatch('respond to focus on input with default text "'+d+'", default text style "'+e+'"',function(){if(d){if($(this).val()===d){$(this).val("")}}this.select();if(e){$(this).removeClass(e)}})};c.inputOnBlur=function(d,e){return c.tryCatch('respond to blur on input with default text "'+d+'", default text style "'+e+'"',function(){var f=$(this).val();if(!f||(d&&(f===d))){if(e){$(this).addClass(e)}if(d){$(this).val(d)}}else{if(e){$(this).removeClass(e)}}})};c.timeTryCatch=false;var a={};c.startTiming=function(d){if(!a[d]){a[d]={total:0,count:0,start:new Date().getTime()}}else{a[d].start=new Date().getTime()}};c.endTiming=function(e){var f,g;var d=new Date().getTime();if(!a[e]){a[e]={total:0,count:1,untimed:1}}else{f=a[e];if(!f.count){f.count=1}else{f.count+=1}if(!f.start){if(!f.untimed){f.untimed=1}else{f.untimed+=1}}else{totalTime=d-f.start;if(!f.total){f.total=totalTime}else{f.total+=totalTime}}}};c.timingToString=function(d){var e=["Performance timings as of ",dateToISOString(new Date()),":\n"];$.each(a,function(f,g){if(g.total&&(!d||(g.total>d))){var h=g.count;e.push(c.padRight(f,50));e.push(" - Count: ");e.push(c.padLeft(g.count,6));e.push(", Total Time: ");e.push(c.padLeft(g.total,9));e.push("ms");if(h&&g.total){if(g.untimed){h=h-g.untimed}e.push(", Average: ");e.push(c.padLeft((g.total/h).toFixed(3),10));e.push("ms")}e.push("\n");if(g.untimed){e.push("    *** NOTE: ");e.push(g.untimed);e.push(" runs were NOT TIMED due to having no start time.  Total and Average do not include these runs.\n")}}});return e.join("")};c.timingToHtml=function(d){var e=['<div class="azPerf"><br/>Performance timings as of ',c.dateToISOString(new Date()),':<table><tr><th style="padding:3px">Label</th><th style="padding:3px">Count</th><th style="padding:3px">Total Time</th><th style="padding:3px">Average Time</th><th style="padding:3px">Notes</th></tr>'];$.each(a,function(f,g){if(g.total&&(!d||(g.total>d))){var h=g.count;e.push('<tr><td style="text-align:left">');e.push(f);e.push('</td><td style="text-align:right">');e.push(g.count);e.push('</td><td style="text-align:right">');e.push(g.total);e.push('ms</td><td style="text-align:right">');if(h&&g.total){if(g.untimed){h=h-g.untimed}e.push((g.total/h).toFixed(3));e.push("ms")}e.push('</td><td style="text-align:left">');if(g.untimed){e.push(g.untimed);e.push(" runs were NOT TIMED due to having no start time.  Total and Average do not include these runs.")}e.push("</td></tr>")}});e.push("</table>");return e.join("")};c.trimString=function(d){return d.replace(/^\s+/,"").replace(/\s+$/,"")};c.padLeft=c.tryCatch("padleft a string",function(g,e,f){var d=g.toString();f=f||" ";while(e&&(d.length<e)){d=f+d}return d});c.padRight=c.tryCatch("padright a string",function(g,e,f){var d=g.toString();f=f||" ";while(e&&(d.length<e)){d=d+f}return d});c.numberToString=c.tryCatch("convert a number to a nicely formatted string",function(e,g,j){var h;if(g!==undefined&&typeof g==="number"){h=e.toFixed(g)}else{h=e.toString()}var m="";if(j||j===undefined){var f=h.split(".");var l=f[0],k=f.length===2?f[1]:"";var d;len=l.length;for(d=0;d<len;d++){if(d>0&&(len-d)%3===0){m+=","}m+=l.slice(d,d+1)}if(k){m+="."+k}}else{m=h}return m});c.addToDate=Azavea.tryCatch("add time to a date",function(g,e,h){var f=g;switch(e.toUpperCase()){case"SECOND":f.setSeconds(g.getSeconds()+h);break;case"MINUTE":f.setMinutes(g.getMinutes()+h);break;case"HOUR":f.setHours(g.getHours()+h);break;case"DAY":f.setHours(g.getHours()+(h*24));break;case"WEEK":f.setHours(g.getHours()+((h*7)*24));break;case"MONTH":f.setMonth(g.getMonth()+h);break;case"YEAR":f.setFullYear(g.getFullYear()+h);break}return f});c.cloneDate=Azavea.tryCatch("clone a date",function(e){return new Date(e.getTime())});c.dateToISOString=Azavea.tryCatch("convert a date to an ISO string",function(h){function g(d){return d<10?"0"+d:d}function e(d){if(d<10){return"00"+d}if(d<100){return"0"+d}return d}return h.getUTCFullYear()+"-"+g(h.getUTCMonth()+1)+"-"+g(h.getUTCDate())+"T"+g(h.getUTCHours())+":"+g(h.getUTCMinutes())+":"+g(h.getUTCSeconds())+"."+e(h.getUTCMilliseconds())+"Z"})}(Azavea));(function(a){String.prototype.trim=String.prototype.trim||function(){return a.trimString(this)};String.prototype.padLeft=String.prototype.padLeft||function(b,c){return a.padLeft(this,b,c)};String.prototype.padRight=String.prototype.padRight||function(b,c){return a.padRight(this,b,c)};String.prototype.htmlEncode=String.prototype.htmlEncode||function(){return a.escapeHTML(this)};Number.prototype.superToString=Number.prototype.superToString||function(b,c){return a.numberToString(this,b,c)};Date.prototype.add=Date.prototype.add||function(b,c){return a.addToDate(this,b,c)};Date.prototype.clone=Date.prototype.clone||function(){return a.cloneDate(this)};Date.prototype.toISOString=Date.prototype.toISOString||function(){return a.dateToISOString(this)}}(Azavea));(function(a){a.renderers={address:function(h,i,g,e,c,d,f){var b="";if(h&&h.toString().trim().length>0){b+=h}if(i&&i.toString().trim().length>0){b+=" - "+i}if(g&&g.toString().trim().length>0){b+=" "+g}if(e&&e.toString().trim().length>0){b+=" "+e}if(c&&c.toString().trim().length>0){b+=" "+c}if(d&&d.toString().trim().length>0){b+=" "+d}if(f&&f.toString().trim().length>0){b+=" "+f}return b},noValue:function(b){if(typeof b==="string"){b=b.trim()}if(b===0){return b}return b||"[No Value]"},yesNo:function(c){var b="";if(c!==undefined){b=c?"Yes":"No"}else{if(typeof c==="boolean"||typeof c==="number"){b=c?"Yes":"No"}else{if(typeof c==="string"){b=c==="1"||c.toLowerCase()==="true"}}}return b},date:function(e){var h="";if(e.getDate){var f=e.getDate(),b=e.getMonth()+1;var c=(f<10?"0":"")+f;var g=(b<10?"0":"")+b;h=g+"-"+c+"-"+e.getFullYear()}return h},money:function(c,b){c=c.toString().replace(/\$|\,/g,"");if(isNaN(c)){c="0"}c=parseFloat(c);sign=(c===(c=Math.abs(c)));c=Math.floor(c*100+0.50000000001);cents=c%100;c=Math.floor(c/100).toString();if(cents<10){cents="0"+cents}var d;for(d=0;d<Math.floor((c.length-(1+d))/3);d++){c=c.substring(0,c.length-(4*d+3))+","+c.substring(c.length-(4*d+3))}var e=((sign)?"":"-")+"$"+c;if(!b){e+=("."+cents)}return e},length:function(c,b){var d="";if(typeof c==="number"){d=Math.round(c,0);d=d.superToString();d+=" "+b}return d},area:function(c,b){var d="";if(typeof c==="number"){d=Math.round(c,0);d=d.superToString();d+=" "+b+"<sup>2</sup>"}return d},elevation:function(c,e,b){var d="";if(b&&b===1){if(typeof c==="number"){d=c.toFixed(2)}if(typeof e==="number"){if(d){d+=" to "}d+=e.toFixed(2)}}return d},merge:function(b,g){var f=b.trim(),e,d,c;for(c=0;c<g.length;c++){e=g[c];if(isNaN(parseInt(c,10))){d=c}else{d=c+1}f=f.replace("{"+d+"}",e)}return f},concat:function(){var c="",b;for(b=0;b<arguments.length;b++){if(c){c+="-"}c+=arguments[b]}return c}}}(Azavea));var PDP={prefix:"pdp-",Widget:{},Pdb:{},Nychanis:{}};(function(c){c.Data={path:""};var b=function(f,e,g,h,d){$.ajax({url:e,data:g,type:f,dataType:"json",success:function(i){if(h&&typeof h==="function"){h(i)}},error:function(k,i,j){if(d&&typeof d==="function"){d(k.responseText)}else{Azavea.log(i);Azavea.log(j)}}})};var a=Azavea.tryCatch("convert object to querystring",function(e){var d="?";var f;for(f in e){if(e.hasOwnProperty(f)&&(e[f]||e[f]===0)){d+=encodeURIComponent(f)+"="+encodeURIComponent(e[f])+"&"}}return d.substring(0,d.length-1)});c.Data.login=Azavea.tryCatch("user login",function(i,f,h,e){var d=c.Data.path+"handlers/login.ashx";var g={username:i,password:f};b("POST",d,g,h,e)});c.Data.checkLoginStatus=Azavea.tryCatch("user login",function(f,e){var d=c.Data.path+"handlers/login.ashx";b("GET",d,{},f,e)});c.Data.logout=Azavea.tryCatch("user login",function(f,e){var d=c.Data.path+"handlers/logout.ashx";b("POST",d,{},f,e)});c.Data.resetPassword=Azavea.tryCatch("data reset password",function(h,g,e){var d=c.Data.path+"handlers/reset-password.ashx";var f={username:h};b("POST",d,f,g,e)});c.Data.createUser=Azavea.tryCatch("data create user",function(g,d,i,k,h,l,j){var e=c.Data.path+"handlers/users.ashx";var f={username:g,name:d,email:i,password:k,roles:h};b("POST",e,f,l,j)});c.Data.getUser=Azavea.tryCatch("data get user",function(h,g,e){var d=c.Data.path+"handlers/users.ashx";var f={username:h};b("GET",d,f,g,e)});c.Data.getUsers=Azavea.tryCatch("data get users",function(i,d,k,g,j,f){var e=c.Data.path+"handlers/users.ashx";var h={page:i,pageSize:d,sortby:k,sortasc:g};b("GET",e,h,j,f)});c.Data.updateUser=Azavea.tryCatch("data create user",function(g,d,i,k,h,l,j){var e=c.Data.path+"handlers/users.ashx";var f={username:g,name:d,email:i,password:k,roles:h,_method:"PUT"};b("POST",e,f,l,j)});c.Data.getAttributes=Azavea.tryCatch("data get attributes",function(f,e){var d=c.Data.path+"handlers/attributes.ashx";b("GET",d,null,f,e)});c.Data.getProperties=function(k,f,i,h,l,e,m,j){if(k&&typeof k==="object"){k=JSON.stringify(k)}if(e&&typeof e==="object"){e=JSON.stringify(e)}var d=c.Data.path+"handlers/properties.ashx";var g={pagesize:f,page:i,criteria:k,sortby:h,sortasc:l,groupby:e};b("GET",d,g,m,j)};c.Data.getPropertiesCsv=Azavea.tryCatch("get properties cvs",function(g,d){if(g&&typeof g==="object"){g=JSON.stringify(g)}if(d&&typeof d==="object"){d=JSON.stringify(d)}var e=c.Data.path+"handlers/properties.ashx";var f={csv:true,pagesize:-1,page:-1,criteria:g,sortby:-1,sortasc:false,groupby:d};window.location.href=e+a(f)});c.Data.getPropertyReport=Azavea.tryCatch("get property report",function(f){var d=c.Data.path+"handlers/report-download.ashx";var e={propertyId:f};window.location.href=d+a(e)});c.Data.checkPropertyReportExists=function(g,h,e){var d=c.Data.path+"handlers/report-download.ashx";var f={propertyId:g};b("POST",d,f,h,e)};c.Data.getPropertyLocations=function(m,p,n,l,j,h,g,f,d,o,k){if(m&&typeof m==="object"){m=JSON.stringify(m)}var e=c.Data.path+"handlers/property-locations.ashx";var i={criteria:m,minx:p,miny:n,maxx:l,maxy:j,minBx:h,maxBx:f,minBy:g,maxBy:d};b("GET",e,i,o,k)};c.Data.getPropertyDetails=function(f,h,e){var d=c.Data.path+"handlers/property-details.ashx";var g={ids:f};b("GET",d,g,h,e)};c.Data.getNychanisMeta=Azavea.tryCatch("data get Nychanis metadata",function(f,e){var d=c.Data.path+"handlers/nyc-meta.ashx";b("GET",d,null,f,e)});c.Data.getNychanis=Azavea.tryCatch("data get Nychanis",function(g,l,k,n,o,f,j,i,e,r,q,p,m){var d=c.Data.path+"handlers/nychanis.ashx";var h={pagesize:g,page:l,sortby:k,sortasc:n,indicator:o,resolution:f,timetype:j,minyear:i,maxyear:e,borough:r,subborough:q};b("GET",d,h,p,m)});c.Data.getNychanisCsv=Azavea.tryCatch("data get Nychanis csv",function(j,f,i,h,e,l,k){var d=c.Data.path+"handlers/nychanis.ashx";var g={csv:true,pagesize:-1,page:-1,sortby:-1,sortasc:false,indicator:j,resolution:f,timetype:i,minyear:h,maxyear:e,borough:l,subborough:k};window.location.href=d+a(g)})}(PDP));(function(c){var b=Azavea.tryCatch("render an array",function(g,f){var e;if(g&&g.length){e='<ul class="pdp-rendered-list">';$.each(g,function(h,j){e+="<li>"+f(j)+"</li>"});e+="</ul>"}return e});c.StringBuffer=function(){this.buffer=[]};c.StringBuffer.prototype.append=function a(e){this.buffer.push(e)};c.StringBuffer.prototype.toString=function d(){return this.buffer.join("")};c.Util={prefix:Azavea.tryCatch("add prefix",function(e,f){if(e){return e+f}else{return f}}),renderers:{integer:function(e){if($.isArray(e)){return b(e,c.Util.renderers.integer)}else{if(e||e===0){return parseInt(e,10).superToString(0)}else{return"[No Value]"}}},money:function(e){if($.isArray(e)){return b(e,Azavea.renderers.money)}else{if(e||e===0){return Azavea.renderers.money(parseFloat(e),true)}else{return"[No Value]"}}},text:function(e){if($.isArray(e)){return b(e,c.Util.renderers.text)}else{if(e&&typeof(e)==="string"){return e.trim()}else{return"[No Value]"}}},numericText:function(e){if($.isArray(e)){return b(e,c.Util.renderers.numericText)}else{if(e){return e.toString().trim()}else{return"[No Value]"}}},address:function(e){return c.Util.renderers.text(e)},year:function(e){return c.Util.renderers.numericText(e)},count:function(e){return c.Util.renderers.integer(e)},percent:function(e){if($.isArray(e)){return b(e,c.Util.renderers.percent)}else{if(e||e===0){return e.toFixed(2).toString()+"%"}else{return"[No Value]"}}},dollars:function(e){return c.Util.renderers.money(e)},ratio:function(e){if($.isArray(e)){return b(e,c.Util.renderers.ratio)}else{if(e||e===0){return e.toFixed(2).toString()}else{return"[No Value]"}}},sliderTicks:function(j,g){var f,h,e=g.length;$(".pdp-nychanis-slider-tick",j).remove();for(f=0;f<g.length;f++){if(g[f]){if(e===1){h=0}else{h=(f/(e-1))*100}$('<div class="pdp-nychanis-slider-tick" title="'+g[f]+'"></div>').css({left:h+"%"}).appendTo(j)}}}},getAttrIndex:function(f,e){var g;for(g=0;g<f.length;g++){if(f[g].UID===e){return g}}},alert:function(e,f){$("<div>"+e+"</div>").dialog({modal:true,title:f,buttons:{Ok:function(){$(this).dialog("close")}}})},error:function(e){PDP.Util.alert(e)},quickAlert:function(f,g){var e=$('<div class="pdp-quickalert ui-widget-header ui-corner-bottom pdp-shadow-drop">'+f+"</div>").appendTo("body");e.slideDown(function(){setTimeout(function(){e.slideUp(function(){e.remove()})},2500)})},quickError:function(e){PDP.Util.quickAlert(e)},initLoginStatus:function(){c.Data.checkLoginStatus(function(e){$(c).trigger("pdp-login-status-refresh",[e])},function(){$(c).trigger("pdp-login-status-refresh",[false])})},trackMetric:function(f,h,e,g){_gaq.push(["_trackEvent",f,h,e,g])}}}(PDP));(function(a){var b=a.Util.prefix;a.Form={validators:{required:{password:function(f,c,e){var d="#"+b(e,f.id);if($(d).is(":visible")){if(!$(d).val()){$(d+", "+d+"-2").addClass(b(e,"input-invalid"))}}return true},_default:function(f,c,e){var d="#"+b(e,f.id);if(!$(d).val()){$(d).addClass(b(e,"input-invalid"));return false}else{return true}}},password:function(h,c,g){var f="#"+b(g,h.id);if($(f).is(":visible")){var e=$(f).val(),d=$(f+"-2").val();if(e!==d){$(f+", "+f+"-2").addClass(b(g,"input-invalid"));a.Form.validationMsg+="Passwords do not match.";return false}}return true},email:function(g,c,f){var e="#"+b(f,g.id);if($(e).is(":visible")){var d=$(e).val();if(d.indexOf("@")===-1||d.indexOf(".")===-1){$(e).addClass(b(f,"input-invalid"));a.Form.validationMsg+="Email is not valid.";return false}}return true},number:function(h,c,f){var e="#"+b(f,h.id);var d=$(e).val();if(d){d=d.replace(/[$,]/g,"")}var g=/^\d*\.?\d*$/;if(d===null||!g.test(d)){$(e).addClass(b(f,"input-invalid"));a.Form.validationMsg+="Not a valid number";return false}return true},rangeLower:function(g,c,e){var d="#"+b(e,g.id);if(a.Form.validators.number(g,c,e)){var f=parseFloat($(d).val());if(f===null||f>c.upper){$(d).addClass(b(e,"input-invalid"));a.Form.validationMsg+="The lower range value is greater than the upper range value.";return false}}else{return false}return true},rangeUpper:function(g,d,f){var e="#"+b(f,g.id);if(a.Form.validators.number(g,d,f)){var c=parseFloat($(e).val());if(c===null||c<d.lower){$(e).addClass(b(f,"input-invalid"));a.Form.validationMsg+="The upper range value is less than the lower range value.";return false}}else{return false}return true},range:function(f,c,e){var d="#"+b(e,f.id);if(a.Form.validators.number(f,c,e)){var g=parseFloat($(d).val());if(g===null||g<c.min||g>c.max){$(d).addClass(b(e,"input-invalid"));a.Form.validationMsg+="The value is not between ["+c.min+"] and ["+c.max+"]";return false}return true}return false}},validate:function(c,f,e,h){a.Form.validationMsg="";$("."+b(h,"input-invalid"),e||".pdp-form").removeClass(b(h,"input-invalid"));var g=true,d=true;$.each(c,function(j,l){if(l.required){var k=a.Form.validators.required[l.type||""]||a.Form.validators.required._default;if(!k(l,f,h)){g=false;if(d){a.Form.validationMsg+="Please enter all required fields.";d=false}}}if(g&&l.validator&&a.Form.validators[l.validator]){g=a.Form.validators[l.validator](l,f,h)&&g}});return g},setupRequired:function(c,d){$.each(c,function(e,f){if(f.required){$("label[for="+f.id+"]",d).append('<span class="pdp-form-required-label">Required</span>')}})}}}(PDP));(function(a){a.Widget.PanelCloser=function(d){var c={},b=$.extend({bindTo:a},d);c.init=Azavea.tryCatch("init app",function(){$(document).bind("mouseup",function(e){if($(e.target).closest(".pdp-closable-panel").length<=0){if($(e.target).closest(".pdp-closable-panel-button").length<=0){if($(e.target).closest(".ui-dialog").length<=0){if($(e.target).closest(".ui-autocomplete").length<=0){if($(e.target).closest(".pdp-pdb-control-tooltip").length<=0){$(".pdp-closable-panel").hide();$(b.bindTo).trigger("pdp-panel-close-event")}}}}}});return c});return c}}(PDP));